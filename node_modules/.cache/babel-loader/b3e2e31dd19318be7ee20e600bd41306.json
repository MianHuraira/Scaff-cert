{"ast":null,"code":"var _jsxFileName = \"D:\\\\Utecho\\\\Scaff-cert\\\\src\\\\Admin\\\\orders\\\\cancel_orders.js\",\n  _s = $RefreshSig$();\n/* eslint-disable no-unused-vars */\nimport '@styles/react/apps/app-users.scss';\nimport PendingOrderTable from './orderDataTable';\nimport React, { useEffect, useState } from 'react';\nimport { Button, Spinner } from 'react-bootstrap';\nimport './order.css';\nimport { apiRequest } from '../../api/apirequest';\nimport OrderModal from './orderModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CancelOrders = () => {\n  _s();\n  const [orders, setorders] = useState('');\n  const [acceptedIds, setAcceptedIds] = useState([]);\n  const [cancelled, setcancelled] = useState([]);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [orderId, setorderId] = useState(false);\n  const handleOpenModal = id => {\n    console.log(id);\n    setorderId(id);\n    setModalOpen(true);\n  };\n  const handleCloseModal = () => {\n    setModalOpen(false);\n  };\n  const handleComplete = (id, status) => {\n    if (cancelled.includes(id)) {\n      setcancelled(cancelled.filter(completedId => completedId !== id));\n      console.log(\"Data 1\");\n    } else {\n      console.log(\"Data 2\");\n      updateOrderStatus(id, status);\n      setcancelled([...cancelled, id]);\n    }\n  };\n  const [isloading, setisLoading] = useState(false);\n  const isAccepted = id => acceptedIds.includes(id);\n  const getdata = () => {\n    setisLoading(true);\n    const body = new FormData();\n    body.append(\"type\", \"get_data\");\n    body.append(\"table_name\", \"orders\");\n    apiRequest({\n      body\n    }).then(async res => {\n      console.log(res);\n      const filteredOrders = res.data.filter(order => order.status === \"cancelled\");\n      setisLoading(false);\n      setorders(filteredOrders);\n    }).catch(error => {\n      setisLoading(false);\n      console.error(error);\n    });\n  };\n  const updateOrderStatus = (id, status) => {\n    const body = new FormData();\n    body.append(\"type\", \"update_data\");\n    body.append(\"table_name\", \"orders\");\n    body.append(\"id\", id);\n    body.append(\"status\", status);\n    console.log(status);\n    apiRequest({\n      body\n    }).then(async res => {\n      console.log(res);\n      if (res.result === true) {\n        getdata();\n      }\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n  useEffect(() => {\n    getdata();\n  }, []);\n  const columns = [{\n    name: 'name',\n    selector: row => row.first_name,\n    sortable: \"true\"\n  }, {\n    name: 'Email',\n    selector: row => row.billing_email,\n    sortable: \"true\"\n  }, {\n    name: 'Phone Number',\n    selector: row => row.billing_phone,\n    sortable: \"true\"\n  }, {\n    name: 'Address',\n    selector: row => row.street + \" \" + row.city,\n    sortable: \"true\"\n  }, {\n    name: 'Service',\n    selector: row => {\n      const cleaningRequest = JSON.parse(row.cleaning_request);\n      return cleaningRequest.length > 0 ? cleaningRequest.join(', ') : 'null';\n    },\n    sortable: \"true\"\n  }, {\n    name: 'Status',\n    selector: row => row.status,\n    sortable: \"true\"\n  }, {\n    name: 'Images',\n    selector: row => /*#__PURE__*/_jsxDEV(\"img\", {\n      src: row.url + row.images[0],\n      alt: \"Service\",\n      className: \"ser_icon\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 26\n    }, this),\n    sortable: false\n  }, {\n    name: '',\n    allowOverflow: false,\n    cell: row => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center  align-items-center  w-100 orderdiv\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"warning\",\n            className: \"fs_8 px-1 my_05 orderbtn\",\n            onClick: () => handleOpenModal(row.id),\n            children: \"Detail\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this);\n    }\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: isloading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" mt-3 d-flex justify-content-center align-items-center vh-75 w-100\",\n      children: /*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\",\n        variant: \"dart\",\n        size: \"lg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [modalOpen === true ? /*#__PURE__*/_jsxDEV(OrderModal, {\n        showModal: modalOpen,\n        onClose: handleCloseModal,\n        id: orderId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }, this) : null, /*#__PURE__*/_jsxDEV(PendingOrderTable, {\n        columns: columns,\n        data: orders,\n        tname: \"Cancel Order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n};\n_s(CancelOrders, \"EG9pBI5a8vQx4KZP4+LjZzu4RtY=\");\n_c = CancelOrders;\nexport default CancelOrders;\nvar _c;\n$RefreshReg$(_c, \"CancelOrders\");","map":{"version":3,"names":["PendingOrderTable","React","useEffect","useState","Button","Spinner","apiRequest","OrderModal","jsxDEV","_jsxDEV","Fragment","_Fragment","CancelOrders","_s","orders","setorders","acceptedIds","setAcceptedIds","cancelled","setcancelled","modalOpen","setModalOpen","orderId","setorderId","handleOpenModal","id","console","log","handleCloseModal","handleComplete","status","includes","filter","completedId","updateOrderStatus","isloading","setisLoading","isAccepted","getdata","body","FormData","append","then","res","filteredOrders","data","order","catch","error","result","columns","name","selector","row","first_name","sortable","billing_email","billing_phone","street","city","cleaningRequest","JSON","parse","cleaning_request","length","join","src","url","images","alt","className","fileName","_jsxFileName","lineNumber","columnNumber","allowOverflow","cell","children","variant","onClick","animation","size","showModal","onClose","tname","_c","$RefreshReg$"],"sources":["D:/Utecho/Scaff-cert/src/Admin/orders/cancel_orders.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport '@styles/react/apps/app-users.scss'\r\nimport PendingOrderTable from './orderDataTable';\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Button, Spinner } from 'react-bootstrap';\r\nimport './order.css';\r\nimport { apiRequest } from '../../api/apirequest';\r\nimport OrderModal from './orderModal';\r\n\r\nconst CancelOrders = () => {\r\n  const [orders, setorders] = useState('');\r\n\r\n  const [acceptedIds, setAcceptedIds] = useState([]);\r\n  const [cancelled, setcancelled] = useState([]);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [orderId, setorderId] = useState(false);\r\n\r\n  const handleOpenModal = (id) => {\r\n    console.log(id);\r\n    setorderId(id);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setModalOpen(false);\r\n\r\n  };\r\n  const handleComplete = (id, status) => {\r\n    if (cancelled.includes(id)) {\r\n      setcancelled(cancelled.filter((completedId) => completedId !== id));\r\n      console.log(\"Data 1\");\r\n    } else {\r\n      console.log(\"Data 2\");\r\n      updateOrderStatus(id, status)\r\n      setcancelled([...cancelled, id]);\r\n    }\r\n  };\r\n  const [isloading, setisLoading] = useState(false);\r\n\r\n  const isAccepted = (id) => acceptedIds.includes(id);\r\n  const getdata = () => {\r\n    setisLoading(true);\r\n    const body = new FormData();\r\n    body.append(\"type\", \"get_data\");\r\n    body.append(\"table_name\", \"orders\");\r\n    apiRequest({ body })\r\n      .then(async (res) => {\r\n        console.log(res);\r\n        const filteredOrders = res.data.filter((order) => order.status === \"cancelled\");\r\n        setisLoading(false);\r\n        setorders(filteredOrders);\r\n      })\r\n      .catch((error) => {\r\n        setisLoading(false);\r\n        console.error(error);\r\n      });\r\n  };\r\n\r\n  const updateOrderStatus = (id, status) => {\r\n    const body = new FormData();\r\n    body.append(\"type\", \"update_data\");\r\n    body.append(\"table_name\", \"orders\");\r\n    body.append(\"id\", id);\r\n    body.append(\"status\", status);\r\n    console.log(status);\r\n    apiRequest({ body })\r\n      .then(async (res) => {\r\n        console.log(res);\r\n        if (res.result === true) {\r\n          getdata()\r\n        }\r\n      }\r\n      )\r\n      .catch((error) => {\r\n        console.error(error);\r\n      });\r\n\r\n  }\r\n  useEffect(() => {\r\n    getdata();\r\n  }, [])\r\n  const columns = [\r\n\r\n    {\r\n      name: 'name',\r\n      selector: (row) => row.first_name,\r\n      sortable: \"true\",\r\n\r\n    },\r\n    {\r\n      name: 'Email',\r\n      selector: (row) => row.billing_email,\r\n      sortable: \"true\",\r\n\r\n    },\r\n    {\r\n      name: 'Phone Number',\r\n      selector: (row) => row.billing_phone,\r\n      sortable: \"true\",\r\n    },\r\n    {\r\n      name: 'Address',\r\n      selector: (row) => row.street + \" \" + row.city,\r\n      sortable: \"true\",\r\n    },\r\n    {\r\n      name: 'Service',\r\n      selector: (row) => {\r\n        const cleaningRequest = JSON.parse(row.cleaning_request);\r\n        return cleaningRequest.length > 0 ? cleaningRequest.join(', ') : 'null';\r\n      },\r\n      sortable: \"true\",\r\n    },\r\n    {\r\n      name: 'Status',\r\n      selector: (row) => row.status,\r\n      sortable: \"true\",\r\n    },\r\n    {\r\n      name: 'Images',\r\n      selector: (row) => <img src={row.url + row.images[0]} alt=\"Service\" className='ser_icon' />,\r\n      sortable: false,\r\n    },\r\n    {\r\n      name: '',\r\n      allowOverflow: false,\r\n      cell: (row) => {\r\n        return (\r\n          <div className='d-flex justify-content-center  align-items-center  w-100 orderdiv'>\r\n            <div >\r\n              <Button variant='warning' className='fs_8 px-1 my_05 orderbtn' onClick={() => handleOpenModal(row.id)} >\r\n                Detail\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )\r\n      }\r\n    }\r\n  ]\r\n  return (\r\n    <div>\r\n     {isloading ? (\r\n        <div className=' mt-3 d-flex justify-content-center align-items-center vh-75 w-100' >\r\n          <Spinner animation=\"border\" variant=\"dart\" size=\"lg\" />\r\n        </div>\r\n      ) : (\r\n\r\n        <>\r\n        {modalOpen === true ?\r\n          <OrderModal showModal={modalOpen} onClose={handleCloseModal} id={orderId}\r\n          /> : null}\r\n   \r\n      <PendingOrderTable columns={columns} data={orders} tname={\"Cancel Order\"} /></> )  }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CancelOrders\r\n"],"mappings":";;AAAA;AACA,OAAO,mCAAmC;AAC1C,OAAOA,iBAAiB,MAAM,kBAAkB;AAChD,OAAOC,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,MAAM,EAAEC,OAAO,QAAQ,iBAAiB;AACjD,OAAO,aAAa;AACpB,SAASC,UAAU,QAAQ,sBAAsB;AACjD,OAAOC,UAAU,MAAM,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAEtC,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACzB,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAExC,MAAM,CAACa,WAAW,EAAEC,cAAc,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACe,SAAS,EAAEC,YAAY,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACiB,SAAS,EAAEC,YAAY,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACmB,OAAO,EAAEC,UAAU,CAAC,GAAGpB,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAMqB,eAAe,GAAIC,EAAE,IAAK;IAC9BC,OAAO,CAACC,GAAG,CAACF,EAAE,CAAC;IACfF,UAAU,CAACE,EAAE,CAAC;IACdJ,YAAY,CAAC,IAAI,CAAC;EACpB,CAAC;EAED,MAAMO,gBAAgB,GAAGA,CAAA,KAAM;IAC7BP,YAAY,CAAC,KAAK,CAAC;EAErB,CAAC;EACD,MAAMQ,cAAc,GAAGA,CAACJ,EAAE,EAAEK,MAAM,KAAK;IACrC,IAAIZ,SAAS,CAACa,QAAQ,CAACN,EAAE,CAAC,EAAE;MAC1BN,YAAY,CAACD,SAAS,CAACc,MAAM,CAAEC,WAAW,IAAKA,WAAW,KAAKR,EAAE,CAAC,CAAC;MACnEC,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;IACvB,CAAC,MAAM;MACLD,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;MACrBO,iBAAiB,CAACT,EAAE,EAAEK,MAAM,CAAC;MAC7BX,YAAY,CAAC,CAAC,GAAGD,SAAS,EAAEO,EAAE,CAAC,CAAC;IAClC;EACF,CAAC;EACD,MAAM,CAACU,SAAS,EAAEC,YAAY,CAAC,GAAGjC,QAAQ,CAAC,KAAK,CAAC;EAEjD,MAAMkC,UAAU,GAAIZ,EAAE,IAAKT,WAAW,CAACe,QAAQ,CAACN,EAAE,CAAC;EACnD,MAAMa,OAAO,GAAGA,CAAA,KAAM;IACpBF,YAAY,CAAC,IAAI,CAAC;IAClB,MAAMG,IAAI,GAAG,IAAIC,QAAQ,EAAE;IAC3BD,IAAI,CAACE,MAAM,CAAC,MAAM,EAAE,UAAU,CAAC;IAC/BF,IAAI,CAACE,MAAM,CAAC,YAAY,EAAE,QAAQ,CAAC;IACnCnC,UAAU,CAAC;MAAEiC;IAAK,CAAC,CAAC,CACjBG,IAAI,CAAC,MAAOC,GAAG,IAAK;MACnBjB,OAAO,CAACC,GAAG,CAACgB,GAAG,CAAC;MAChB,MAAMC,cAAc,GAAGD,GAAG,CAACE,IAAI,CAACb,MAAM,CAAEc,KAAK,IAAKA,KAAK,CAAChB,MAAM,KAAK,WAAW,CAAC;MAC/EM,YAAY,CAAC,KAAK,CAAC;MACnBrB,SAAS,CAAC6B,cAAc,CAAC;IAC3B,CAAC,CAAC,CACDG,KAAK,CAAEC,KAAK,IAAK;MAChBZ,YAAY,CAAC,KAAK,CAAC;MACnBV,OAAO,CAACsB,KAAK,CAACA,KAAK,CAAC;IACtB,CAAC,CAAC;EACN,CAAC;EAED,MAAMd,iBAAiB,GAAGA,CAACT,EAAE,EAAEK,MAAM,KAAK;IACxC,MAAMS,IAAI,GAAG,IAAIC,QAAQ,EAAE;IAC3BD,IAAI,CAACE,MAAM,CAAC,MAAM,EAAE,aAAa,CAAC;IAClCF,IAAI,CAACE,MAAM,CAAC,YAAY,EAAE,QAAQ,CAAC;IACnCF,IAAI,CAACE,MAAM,CAAC,IAAI,EAAEhB,EAAE,CAAC;IACrBc,IAAI,CAACE,MAAM,CAAC,QAAQ,EAAEX,MAAM,CAAC;IAC7BJ,OAAO,CAACC,GAAG,CAACG,MAAM,CAAC;IACnBxB,UAAU,CAAC;MAAEiC;IAAK,CAAC,CAAC,CACjBG,IAAI,CAAC,MAAOC,GAAG,IAAK;MACnBjB,OAAO,CAACC,GAAG,CAACgB,GAAG,CAAC;MAChB,IAAIA,GAAG,CAACM,MAAM,KAAK,IAAI,EAAE;QACvBX,OAAO,EAAE;MACX;IACF,CAAC,CACA,CACAS,KAAK,CAAEC,KAAK,IAAK;MAChBtB,OAAO,CAACsB,KAAK,CAACA,KAAK,CAAC;IACtB,CAAC,CAAC;EAEN,CAAC;EACD9C,SAAS,CAAC,MAAM;IACdoC,OAAO,EAAE;EACX,CAAC,EAAE,EAAE,CAAC;EACN,MAAMY,OAAO,GAAG,CAEd;IACEC,IAAI,EAAE,MAAM;IACZC,QAAQ,EAAGC,GAAG,IAAKA,GAAG,CAACC,UAAU;IACjCC,QAAQ,EAAE;EAEZ,CAAC,EACD;IACEJ,IAAI,EAAE,OAAO;IACbC,QAAQ,EAAGC,GAAG,IAAKA,GAAG,CAACG,aAAa;IACpCD,QAAQ,EAAE;EAEZ,CAAC,EACD;IACEJ,IAAI,EAAE,cAAc;IACpBC,QAAQ,EAAGC,GAAG,IAAKA,GAAG,CAACI,aAAa;IACpCF,QAAQ,EAAE;EACZ,CAAC,EACD;IACEJ,IAAI,EAAE,SAAS;IACfC,QAAQ,EAAGC,GAAG,IAAKA,GAAG,CAACK,MAAM,GAAG,GAAG,GAAGL,GAAG,CAACM,IAAI;IAC9CJ,QAAQ,EAAE;EACZ,CAAC,EACD;IACEJ,IAAI,EAAE,SAAS;IACfC,QAAQ,EAAGC,GAAG,IAAK;MACjB,MAAMO,eAAe,GAAGC,IAAI,CAACC,KAAK,CAACT,GAAG,CAACU,gBAAgB,CAAC;MACxD,OAAOH,eAAe,CAACI,MAAM,GAAG,CAAC,GAAGJ,eAAe,CAACK,IAAI,CAAC,IAAI,CAAC,GAAG,MAAM;IACzE,CAAC;IACDV,QAAQ,EAAE;EACZ,CAAC,EACD;IACEJ,IAAI,EAAE,QAAQ;IACdC,QAAQ,EAAGC,GAAG,IAAKA,GAAG,CAACvB,MAAM;IAC7ByB,QAAQ,EAAE;EACZ,CAAC,EACD;IACEJ,IAAI,EAAE,QAAQ;IACdC,QAAQ,EAAGC,GAAG,iBAAK5C,OAAA;MAAKyD,GAAG,EAAEb,GAAG,CAACc,GAAG,GAAGd,GAAG,CAACe,MAAM,CAAC,CAAC,CAAE;MAACC,GAAG,EAAC,SAAS;MAACC,SAAS,EAAC;IAAU;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAG;IAC3FnB,QAAQ,EAAE;EACZ,CAAC,EACD;IACEJ,IAAI,EAAE,EAAE;IACRwB,aAAa,EAAE,KAAK;IACpBC,IAAI,EAAGvB,GAAG,IAAK;MACb,oBACE5C,OAAA;QAAK6D,SAAS,EAAC,mEAAmE;QAAAO,QAAA,eAChFpE,OAAA;UAAAoE,QAAA,eACEpE,OAAA,CAACL,MAAM;YAAC0E,OAAO,EAAC,SAAS;YAACR,SAAS,EAAC,0BAA0B;YAACS,OAAO,EAAEA,CAAA,KAAMvD,eAAe,CAAC6B,GAAG,CAAC5B,EAAE,CAAE;YAAAoD,QAAA,EAAE;UAExG;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA;QAAS;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MACL;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACF;IAEV;EACF,CAAC,CACF;EACD,oBACEjE,OAAA;IAAAoE,QAAA,EACE1C,SAAS,gBACP1B,OAAA;MAAK6D,SAAS,EAAC,oEAAoE;MAAAO,QAAA,eACjFpE,OAAA,CAACJ,OAAO;QAAC2E,SAAS,EAAC,QAAQ;QAACF,OAAO,EAAC,MAAM;QAACG,IAAI,EAAC;MAAI;QAAAV,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAG;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACnD,gBAGNjE,OAAA,CAAAE,SAAA;MAAAkE,QAAA,GACCzD,SAAS,KAAK,IAAI,gBACjBX,OAAA,CAACF,UAAU;QAAC2E,SAAS,EAAE9D,SAAU;QAAC+D,OAAO,EAAEvD,gBAAiB;QAACH,EAAE,EAAEH;MAAQ;QAAAiD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACvE,GAAG,IAAI,eAEbjE,OAAA,CAACT,iBAAiB;QAACkD,OAAO,EAAEA,OAAQ;QAACL,IAAI,EAAE/B,MAAO;QAACsE,KAAK,EAAE;MAAe;QAAAb,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAG;IAAA;EAAK;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QAC7E;AAEV,CAAC;AAAA7D,EAAA,CAlJKD,YAAY;AAAAyE,EAAA,GAAZzE,YAAY;AAoJlB,eAAeA,YAAY;AAAA,IAAAyE,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module"}